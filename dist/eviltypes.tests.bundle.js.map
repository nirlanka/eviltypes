{"version":3,"file":"eviltypes.tests.bundle.js","mappings":"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","sources":["webpack://eviltypes/./src/utils/assertPrimitive.js","webpack://eviltypes/./src/types/TBase.js","webpack://eviltypes/./src/utils/assertTypePrimitive.js","webpack://eviltypes/./src/types/TError.js","webpack://eviltypes/./src/assert.js","webpack://eviltypes/./tests/assert-tests.js","webpack://eviltypes/./src/types/TBaseInteger.js","webpack://eviltypes/./src/types/TBaseString.js","webpack://eviltypes/./src/types/TBaseObject.js","webpack://eviltypes/./tests/types-tests.js"],"sourcesContent":["/**\n * @returns {Error}\n */\nexport function assertPrimitive(/** @type {() => Boolean} */ testFn) {\n    let err;\n\n    try {\n        const isTestPass = testFn();\n        if (!isTestPass)\n            throw Error(`Assert failure: ${testFn}`);\n    } catch (_err) {\n        err = _err;\n        err = Error(`[ASSERT FAILURE]`);\n    }\n\n    return err;\n}\n","import { assertTypePrimitive } from \"../utils/assertTypePrimitive\";\n\nexport class TBase {\n    /** \n     * @abstract\n     * @type {typeof TBase}\n     */\n    _primitive;\n\n    /**\n     * @abstract\n     * @type {Record<string, new (...args: TBase[]) => TBase>}\n     */\n    types = {};\n\n    /**\n     * @abstract\n     * @type {any} \n     */\n    _value = null;\n\n    /** @final */\n    set(/** @type {TBase} */ value) {\n        this.assert(value);\n\n        this._value = value;\n        return this;\n    }\n\n    /** \n     * @final\n     * @returns {TBase}\n     */\n    get() {\n        return this._value;\n    }\n\n    /** @abstract */\n    assert(/** @type {TBase} */ value) {\n        assertTypePrimitive(value, this._primitive);\n    }\n}","import { assertPrimitive } from './assertPrimitive';\n\nexport function assertTypePrimitive(\n    /** @type {TBase} */ instance,\n    /** @type {typeof TBase} */ type,\n) {\n    assertPrimitive(() => instance.constructor.name === type.name);\n}\n\n\n","import { TBase } from \"./TBase\";\n\nexport class TError extends TBase {\n    _primitive = String;\n\n    assert(/** @type {string} */ value) {\n        return !!value;\n    }\n}","import { TError } from \"./types/TError\";\nimport { assertPrimitive } from \"./utils/assertPrimitive\";\n\nexport function assert(/** @type {() => Boolean} */ testFn) {\n    const err = assertPrimitive(testFn);\n    if (err) {\n        const errToThrow = (new TError()).set(err);\n        if (__DEV_DEBUG_TESTS__) {\n            console.error(errToThrow);\n            return;\n        }\n\n        throw errToThrow;\n    }\n}","import { assert } from '../src';\n\nfor (const value of [\n    '',\n    \"test\",\n    12,\n    'true',\n]) {\n    assert(() => ['true', 'false'].some(x => x === value));\n}","import { assert } from \"../assert\";\nimport { TBase } from \"./TBase\";\n\nexport class TBaseInteger extends TBase {\n    /** \n     * @override\n     * @type {typeof Number} \n     */\n    _primitive = Number;\n\n    /** @override */\n    assert(/** @type {Number} */ value) {\n        assert(() => Number.isInteger(value));\n        assert(() => value > -1);\n    }\n}","import { TBase } from \"./TBase\";\n\nexport class TBaseString extends TBase {\n    /** \n     * @override\n     * @type {typeof String} \n     */\n    _primitive = String;\n}","import { TBase } from \"./TBase\";\n\nexport class TBaseObject extends TBase {\n    /** \n     * @override\n     * @type {typeof Object} \n     */\n    _primitive = Object;\n}","import {\n    assert,\n    TError,\n    TBaseInteger,\n    TBaseString,\n    TBaseObject\n} from '../src';\n\nclass TWholeNumber extends TBaseInteger {\n    assert(value) {\n        super.assert(value);\n        assert(() => value >= 0);\n    }\n}\n\nconst x0 = new TWholeNumber();\nconsole.log(x0.get());\n\n/** @type {TWholeNumber} */\nconst x1 = new TWholeNumber().set('9');\nconsole.log(x1);\n\n/** @type {TWholeNumber} */\nconst x2 = new TWholeNumber().set(13);\nconsole.log(x2);\n\n/** @type {TWholeNumber} */\nconst x3 = new TWholeNumber().set(-4);\nconsole.log(x3);\n\nclass TUnformattedText extends TBaseString {\n    assert(value) {\n        super.assert(this);\n        assert(() => !!value);\n    }\n}\n\n/** Radio component option value **/\nclass TNumericRadioOption extends TBaseObject {\n    types = {\n        'value': TWholeNumber,\n        'label': TUnformattedText\n    };\n}\n\n/** @type {TNumericRadioOption} */\nconst x4 = new TNumericRadioOption().set({\n    value: new TWholeNumber().set(0),\n    label: new TUnformattedText().set(\"Option 0\"),\n});\nconsole.log(x4);\nconsole.log(x4.get().value);\nconsole.log(x4.get().value.get());\n\n/** @type {TNumericRadioOption} */\nconst x5 = new TNumericRadioOption().set({\n    value: new TWholeNumber().set(-1),\n    label: new TUnformattedText().set(\"[Please select]\"),\n});\nconsole.log(x5);\nconsole.log(x5.get().value);\nconsole.log(x5.get().value.get());\n\n/** @returns {[TWholeNumber, TError]} */\nfunction getOptionValue(/** @type {HTMLSelectElement} */ selectEl) {\n    let error = assert(() => !isNaN(selectEl.value), \"a whole number\", [selectEl.value]);\n\n    return [\n        selectEl.value ? new TWholeNumber().set(selectEl.value) : undefined,\n        error \n            || (selectEl.value ? undefined : new TError().set(\"No option selected\")),\n    ];\n}\n\nconst [x6, err6] = getOptionValue(document.querySelector('#pet-select'));\nconsole.log(x6, err6);\n\nif (err6) {\n    console.error('Error:', err6.get())\n}\n\nfunction onSelect(/** @type {Event} */ ev) {\n    assert(() => ev.type === 'change', \"has correct event type\", [ev.type]);\n    assert(() => ev.target.id === 'pet-select', \"has correct target element 'change'\", [ev.target.id]);\n\n    const [optionValue, err] = getOptionValue(ev.target);\n    console.log(optionValue);\n    console.log(err);\n}\n\ndocument.querySelector('#pet-select').addEventListener('change', onSelect);"],"names":["assertPrimitive","testFn","err","Error","_err","TBase","_primitive","types","_value","set","value","this","assert","get","instance","type","constructor","name","TError","String","errToThrow","__DEV_DEBUG_TESTS__","console","error","some","x","TBaseInteger","Number","isInteger","TBaseString","TBaseObject","Object","TWholeNumber","super","x0","log","x1","x2","x3","TUnformattedText","TNumericRadioOption","x4","label","x5","getOptionValue","selectEl","isNaN","undefined","x6","err6","document","querySelector","addEventListener","ev","target","id","optionValue"],"sourceRoot":""}